- AWS
    
    전 세계적으로 클라우드 서비스를 제공하는 플랫폼
    
- 리전과 가용영역
    
    AWS의 지리적, 물리적 분산 구조를 이해하기 위해서 리전과 가용영역에 대해서 알아야 한다.
    
    ### AWS Region
    
    AWS 데이터 센터들이 물리적으로 분리된 지리적 위치
    
    리전 간에는 물리적 거리가 멀고, 네트워크 지연이 있다.
    
    각 리전은 다른 AWS 리전과 완전히 독립적으로 운영된다.
    
    즉, 해당 리전에 연결된 리소스만 표시된다.
    
    - **리전 선택 시 고려사항**
    1. 지연 시간과 사용자 위치
        
        사용자와 가장 가까운 리전을 선택하는 것이 좋다.
        
        근접성을 보장하여 더 빠르고 낮은 지연 시간으로 데이터를 전달한다.
        
    2. 서비스 가용성
        
        모든 리전에서 모든 서비스를 사용할 수 있는 것은 아니다.
        
        따라서 필요한 서비스의 우선순위를 정하고, 해당 서비스를 지원하는 AWS 리전을 결정한 다음 그 중에서 선택한다.
        
    3. 비용
    4. 지역의 법적 요구사항
    
    ### **가용영역(Availability Zone, AZ)**
    
    가용영역은 한 리전 안에 포함된 데이터 센터 집합
    
    즉, AWS 리전은 최소 2개 이상의 가용 영역으로 구성되고, 각 가용 영역은 최소 1개 이상의 데이터 센터로 구성
    
    **가용영역의 특징**:
    
    - 각 AZ는 독립적이다.
    - 독립된 시설이지만, 저지연 네트워크로 서로 연결되어 있어 AZ 간 연결은 고속
    - 하나의 AZ가 다운될 경우를 대비해서 2개 이상의 AZ에 걸쳐 배포하는 것이 일반적이다.
    
    **서비스의 가용성을 높이기 위해 설계**됨
    
- 서브네팅
    
    IP 주소 공간을 더 작은 네트워크 단위(서브넷)로 나누는 것
    
    - 서브네팅의 목적
        - 네트워크를 ****분할하여 트래픽을 분리해서 효율적으로 관리
        - 보안성을 높인다.
        - IP 주소를 더 효율적으로 사용하기 위함
    - 서브네팅이 중요한 이유
        - 네트워크를 분리해서 서비스별, 보안영역별로 사용할 수 있다.
        - 큰 네트워크를 하나만 쓰는 것보다, 여러 서브넷으로 나누는 것이 관리와 보안 차원에서 유리하다.
    
    IP 주소와 서브넷 마스크를 이용해서 네트워크 범위를 정의한다.
    
    - 예시:
        
        `192.168.1.0/24` (전체 IP: 256개 → 254 호스트 사용 가능)
        
        - 서브넷 A: `192.168.1.0/25` (IP: `0~127`)
        - 서브넷 B: `192.168.1.128/25` (IP: `128~255`)
        
- 라우팅
    
    서로 다른 네트워크(또는 서브넷) 간에 데이터를 전달하는 과정
    
    → 패킷이 목적지 IP까지 도달하는 경로를 결정하는 과정이다.
    
    서브넷 간 통신은 무조건 라우팅이 필요함!
    
    - 라우팅의 필요성
        - 네트워크를 분할하면 그 사이에 경로가 필요하다.
        - **서브넷끼리는 직접 통신이 불가**하므로 이 때 라우터(라우팅 테이블)가 경로를 만들어줘야 한다.
    - 목적
        - 내 컴퓨터가 **다른 네트워크의 컴퓨터와 통신**할 수 있도록 **경로를 결정**
        - 보통 라우터(router)나 **L3 스위치**가 수행
    - 예시:
        - 서브넷 A: `192.168.1.0/24`
        - 서브넷 B: `192.168.2.0/24`
        
        **→ 서브넷 마스크가 다르기 때문에 직접 통신할 수 없음**
        
        → 즉, 라우터가 필요
        
- VPC
    
    VPC(Virtual Private Cloud)는 AWS에서 사용자가 정의하는 가상 네트워크
    
    사용자가 IP 주소, 서브넷, 라우팅, 보안 규칙 등을 자유롭게 설정할 수 있다.
    
    - VPC 구성 요소
        
        
        | 구성 요소 | 설명 |
        | --- | --- |
        | **서브넷 (Subnet)** | VPC 안의 작은 네트워크 블록, Public/Private으로 구분함 |
        | **라우팅 테이블** | 서브넷이 외부나 다른 네트워크와 통신할 수 있도록 경로 설정 |
        | **인터넷 게이트웨이(IGW)** | VPC를 인터넷과 연결 |
        | **NAT 게이트웨이/NAT 인스턴스** | 프라이빗 서브넷의 인스턴스가 **인터넷으로 나가도록** 해줌 |
        | **보안 그룹, NACL** | 인스턴스 수준/서브넷 수준의 방화벽 규칙 |
        | **DHCP 옵션 세트** | DNS 서버나 도메인 설정을 커스터마이징할 수 있음 |
- 사설 IP 주소
    
    인터넷에서 직접 접근할 수 없는 내부망 전용 IP 주소
    
    - 사설 IP 대역 (RFC 1918 표준)
        
        
        | IP 범위 | 클래스 | 주소 수 |
        | --- | --- | --- |
        | `10.0.0.0 ~ 10.255.255.255` | Class A | 1,677만 개 |
        | `172.16.0.0 ~ 172.31.255.255` | Class B | 104만 개 |
        | `192.168.0.0 ~ 192.168.255.255` | Class C | 6만5천 개 |
    - 사설 IP 주소의 필요성
        
        인터넷은 공용 IP 주소를 사용함으로써, 누구나 접근 가능하고 개방되어 있다.
        
        공용 IP 주소는 개수가 한정적이여서 전 세계에서 쓰이는 모든 장치에 다 부여될 수 없음
        
        따라서 내부에서만 사용하는 IP는 공용 IP 주소를 낭비하지 않도록 사설 IP 주소가 생김!
        
        또한, 내부 네트워크는 노출되면 보안 관점에서 안전하지 않다.
        
        → 사설 IP로 운영하는데, 외부와의 통신이 필요할 경우에는 `NAT(Network Address Translation)`을 거쳐서 나가도록 한다.
        
- 포트포워딩
    
    **외부에서** **특정 포트로 접근**하면, 그 요청을 **내부 네트워크의 특정 IP와 포트로 전달**한다.
    
    포트 포워딩은 주로 외부에서 **사설 IP 디바이스에 접근**하려고 할 때 사용된다.
    
    - 언제 쓰는가?
        - **외부에서 내부 서버에 접속**하고 싶을 때
        - NAT 뒤에 있는 내부 장비를 특정 포트로 노출하고 싶을 때
    - 포트 포워딩 예시
        
        <aside>
        
        공용 IP: `203.0.113.5`
        
        내부 서버 사설 IP: `192.168.1.100`
        
        서버가 열어둔 포트: `80`
        
        </aside>
        
    
    ```
    **203.0.113.5:8080** → **192.168.1.100:80**
    ```
    
    ➡️ 외부에서 http://203.0.113.5:8080 으로 접근하면,
    
    ➡️ 공유기가 이걸 내부의 192.168.1.100:80 으로 전달한다.
    
    이전에 NAT를 설명할 때..
    
    NAT Gateway
    
    - 프라이빗 서브넷의 EC2 인스턴스가 인터넷에 나가도록 해준다.
    - **외부에서 들어오는 트래픽은 허용하지 않음** → 포트 포워딩과 다른 점
    - NAT는 사설 IP(내부)를 가진 장치가 인터넷(외부)에 접근할 수 있도록 IP 주소를 변환
    
    포트 포워딩을 하려면?
    
    - 퍼블릭 서브넷에 EC2를 두고
    - **퍼블릭 IP + 보안 그룹 + 라우팅**을 설정해야 함
    - 포트 22 (SSH), 80 (HTTP), 443 (HTTPS) 등 원하는 포트를 열 수 있음
    
    포트 포워딩은 외부에서 특정 포트로 요청이 들어오면, 그 요청을 내부의 특정 장치(사설 IP 주소)로 넘겨주는 것이다!
    
    외부에서 내부 장치에 접속 가능하게 하도록 함
    
- NAT 프로토콜
    
    **위에서 NAT를 설명하였듯이, NAT는 사설 IP 주소를 공용 IP 주소로 변환하여 인터넷과 통신할 수 있게 해준다.**
    
    사설 IP는 인터넷에 직접 접근할 수 없기 때문에, NAT를 통해 사설 IP → 공용 IP로 변환하여 외부로 내보낸다.
    
    반대로, 외부 응답도 다시 공용 IP → 사설 IP로 돌려준다.
    
- 포트 번호
    
    포트 번호는 하나의 IP 주소 내에서 서비스를 구분해주는 번호
    
    각기 다른 포트 번호를 사용해서 통신한다.
    
    예시:
    
    - 웹브라우저 → 웹서버로 접속 (`IP:80`)
    - 파일전송 → FTP 서버로 접속 (`IP:21`)
    - 원격접속 → SSH 서버로 접속 (`IP:22`)
    
    포트 번호는 양방향으로 존재한다.
    
    웹서버에 접속할 때:
    
    - 내 컴퓨터: `192.168.0.5:54321` (임의의 포트)
    - 서버: `93.184.216.34:80` (웹서버 포트)
    
    ➡️ 여기서 54321은 **클라이언트가 임시로 열어놓은 포트**
    
    ➡️ 80은 **서버가 항상 대기 중인 포트**